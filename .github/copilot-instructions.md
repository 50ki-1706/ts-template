# GitHub Copilot Code Review Instructions

## このドキュメントについて

このドキュメントは、**GitHub Copilot によるコードレビュー時に必ず参照される**指示書です。

### 重要事項

- **レビューコメントは必ず日本語で記述してください。**
- プロジェクトの詳細な仕様・技術スタック・コーディング規約については、ルートディレクトリの `AGENTS.md` を参照してください。
- 技術別の詳細なレビュー指示は `.github/instructions/` ディレクトリ内のファイルを参照してください：
  - `typescript.instructions.md`: TypeScript 固有のレビューポイント
  - `react.instructions.md`: React コンポーネント構造のレビューポイント
  - `nextjs.instructions.md`: Next.js 固有のレビューポイント

## コードレビューの基本方針

### 前提条件

- レビューコメントは必ず日本語で行ってください。
- 建設的で具体的なフィードバックを提供してください。
- 重大な問題、潜在的なバグ、セキュリティ上の懸念に焦点を当ててください。

### レビュー観点

#### 1. コード品質

- **可読性**: コードは理解しやすく、適切に命名されているか
- **保守性**: 将来の変更が容易に行えるか
- **一貫性**: プロジェクトのコーディング規約に準拠しているか
- **簡潔性**: 不必要に複雑になっていないか

#### 2. TypeScript / 型安全性

- **型の適切性**: `any` 型の使用を避け、適切な型定義がされているか
- **型推論**: 冗長な型注釈がないか
- **Null 安全性**: null/undefined の適切な処理がされているか

#### 3. パフォーマンス

- **不要な再レンダリング**: React コンポーネントの最適化が必要か
- **メモリリーク**: イベントリスナーやタイマーの適切なクリーンアップがされているか
- **非同期処理**: 適切なエラーハンドリングがされているか

#### 4. セキュリティ

- **入力検証**: ユーザー入力の適切なバリデーションとサニタイズがされているか
- **認証/認可**: 適切なアクセス制御がされているか
- **機密情報**: ハードコードされた機密情報がないか
- **XSS/CSRF**: セキュリティ脆弱性への対策がされているか

#### 5. アクセシビリティ

- **セマンティック HTML**: 適切な HTML 要素が使用されているか
- **ARIA 属性**: 必要に応じて適切な ARIA 属性が付与されているか
- **キーボード操作**: キーボードでの操作が可能か

#### 6. テスト

- **テストカバレッジ**: 重要なロジックに対するテストがあるか
- **テストの品質**: テストが適切に機能をカバーしているか

### レビューコメントの優先度

- **🔴 Critical (重大)**: セキュリティ、データ損失、重大なバグ
- **🟡 Important (重要)**: パフォーマンス問題、型安全性の欠如
- **🔵 Minor (軽微)**: コードスタイル、命名の改善提案
- **💡 Suggestion (提案)**: より良い実装方法の提案

## プロジェクト固有のレビューポイント

### Next.js / React

- Server Components と Client Components の適切な使い分け
- `use client` ディレクティブの適切な使用
- データフェッチングの最適化 (SWR の適切な使用)

### データベース (Drizzle ORM)

- SQL インジェクションのリスクがないか
- トランザクションの適切な使用
- インデックスの最適化

### 認証 (Better Auth)

- セッション管理の適切性
- OAuth フローの実装の正確性
- トークンの適切な取り扱い

## レビュー除外項目

以下の項目はレビュー対象外とします:

- 自動生成されたコード (マイグレーション、型定義など)
- サードパーティライブラリのコード
- 設定ファイルの些細な変更

## 参考資料

プロジェクトの詳細な仕様、技術スタック、アーキテクチャについては、以下を参照してください:

- `AGENTS.md`: プロジェクト全体の仕様と設計ガイドライン
- `README.md`: セットアップとビルド手順
